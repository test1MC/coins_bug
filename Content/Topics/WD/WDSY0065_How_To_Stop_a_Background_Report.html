<?xml version="1.0" encoding="utf-8"?>
<html lang="en" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>How To Stop a Background Report</title>
    </head>
    <body>
        <MadCap:concept term="Topics" />
        <h1 class="print">How To Stop a Background Report</h1>
        <h2>Purpose of this document</h2>
        <p>This document will be of interest to <MadCap:variable name="General.ProductName" /> system administrators.&#160; It describes the process of forcing a background report to stop generating.</p>
        <p>If you have any other questions about the information contained in this document, or require further help with stopping background reports, please contact the <MadCap:variable name="General.ProductName" /> Communication <MadCap:variable name="Variables.centre" style="text-transform: capitalize;" /> or your account <MadCap:variable name="Variables.hr manager" />.</p>
        <h2>Stopping Reports</h2>
        <p><MadCap:variable name="General.ProductName" /> background reports are run by a background reporting agent.&#160; These are processes similar to a normal <MadCap:snippetBlock src="../../Resources/Snippets/COINSplus.flsnp" /> connection to <MadCap:variable name="General.ProductName" /> except that there is no screen visible.&#160; The output from these sessions is put in the file specified in the PM parameter <span class="parameter">GENBACK</span>.&#160; Typically the output is to $BASE/var/diag/genback.log.</p>
        <p>The following sections describe how to stop a background report from executing.&#160; They should be followed in order (as appropriate) as the severity of the action increases.</p>
        <h2>Cancelling a Report</h2>
        <p>If a report is placed in the background queue but has so far not started to generate then it can simply be deleted.</p>
        <h3>Cancelling a Report in<MadCap:snippetText src="../../Resources/Snippets/COINSplus.flsnp" /></h3>
        <p>In the<MadCap:snippetText src="../../Resources/Snippets/COINSplus.flsnp" /> interface select the Report Status option in Print Manager <MadCap:variable name="Variables.enquiries" />.</p>
        <p>
            <img src="../../Resources/Images/SY/SY_006501.gif" class="FullWidth" />
        </p>
        <p>Select the report to cancel.&#160; As long as it has not started then it will offer the 'Delete this record' option.&#160; Select Y and the report will be deleted from the queue and will not generate.</p>
        <h3>Cancelling a Report in OA</h3>
        <p>In the OA Browser interface, go to the Report Status screen and&#160;select the report that you wish to cancel.&#160; As long as the report has not yet started generating (showing Waiting status) then by clicking the delete button the report will be cancelled.</p>
        <p>
            <img src="../../Resources/Images/SY/SY_006502.gif" class="FullWidth" />
        </p>
        <h2>Aborting OA Reports</h2>
        <p>If the report has started to generate then the delete options above will be prevented.&#160; For OA style reports where the output is a PDF file, you can abort these part-way through generation.&#160; At the next line in the report the generation will complete and the report so far will be produced in PDF with a message to show that the generation was aborted.</p>
        <p>Go to the Report Status screen and&#160;select the report to be aborted (showing Generating status).&#160; Select the Cancel Report Request option in the browse action and click the apply action button.&#160; The status of the report will change to Aborting and at the next suitable point within the report production it will stop and the status will change to Aborted.</p>
        <p>
            <img src="../../Resources/Images/SY/SY_006503.gif" class="FullWidth" />
        </p>
        <p>If the report is stuck at a lower level of generation then the status will remain at Aborting and you will need to try the next solution.</p>
        <h2>Disconnecting a Report Generator</h2>
        <p>If you have tried the previous two solutions and the report still continues to generate then it will be necessary to disconnect the report generator to stop the report.</p>
        <p>You first need to identify the report generator agent that is responsible for processing the report.&#160; From May 2006 patches this will be shown in the report log file.&#160; Prior to this patch you need to find the agent as shown below (the example is shown using HP-UX ? your unix commands may be different)</p>
        <p>At the unix prompt type</p>
        <p><span class="screentype">ps -efx|grep pm99</span>
        </p>
        <p>This will return one or more processes that contain the string 'pm99'.<br />For example:</p>
        <p><span class="screentype">root 22602 1 255 10:53:26 ? 164:21 /usr/opt/dlc/v91e/bin/_progres -b -pf /opt/v10prod/dev/bin/coins.pf -b -p pm99b.p </span>
        </p>
        <p>The process ID of this background report generator is 22602.&#160; If there is more than one then you will need to make a judgement about which one is generating the problem report.&#160; You could turn off the background report generator which will allow the generators that are functioning properly to close; or you may be able to make assumptions about the CPU usage (shown here as 164:21) as to which process is the one required.</p>
        <p>Having identified the report generator process ID you can the proceed to disconnect this process from the database which will cause it to stop generating the report.</p>
        <p>Log in to COINSAdmin and go to Interactive Stop DB in the Brokers menu for the environment concerned.&#160; Select the coins database from the list of databases.</p>
        <p>You will be shown a list of users and agents connected to the database.<br />For example:</p><pre style="font-family: monospace;" xml:space="preserve">usr&#160;&#160;&#160; pid&#160;&#160;&#160; time of login&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; user id&#160;&#160;&#160;&#160; tty&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Limbo?<br />5&#160;    3050 Wed Mar 22 13:09:23 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; batch&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />6    22602 Sat Mar 18 23:12:32 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; batch&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />7    20534 Wed Mar 22 16:20:10 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tz&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />8    12659 Wed Mar 22 16:29:58 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tP&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />9    26908 Wed Mar 22 15:08:59 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tn&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />10&#160;&#160;  6521 Wed Mar 22 15:36:35 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tnb&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />11   25870 Wed Mar 22 16:29:59 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tJ&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />12&#160;&#160;  3051 Wed Mar 22 13:09:23 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; batch&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />13   12973 Wed Mar 22 15:30:46 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />14   24807 Wed Mar 22 16:24:37 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tg&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />16   18726 Wed Mar 22 08:20:28 2006&#160;&#160; THAMAN&#160;&#160;&#160;&#160;&#160; /dev/pts/tw&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />17   17264 Wed Mar 22 08:05:43 2006&#160;&#160; ELIFEN&#160;&#160;&#160;&#160;&#160; /dev/pts/tq&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />18   17322 Wed Mar 22 15:02:56 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />19   17396 Wed Mar 22 08:06:38 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tu&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />RETURN - show remaining, Q - quit:</pre>
        <p>If there is more than one page of users then press <span class="kEY">Return</span> until you get the final page as shown below.&#160; You should look at the column headed ?pid? and find the report agent process ID that you have identified above.&#160; Note the user number from the column headed 'usr' that is alongside this process ID (in this example user number 6).</p><pre style="font-family: monospace;" xml:space="preserve">usr&#160;&#160;&#160; pid&#160;&#160;&#160; time of login&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; user id&#160;&#160;&#160;&#160; tty&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Limbo?<br />38   12929 Wed Mar 22 09:20:57 2006&#160;&#160; IANMIL&#160;&#160;&#160;&#160;&#160; /dev/pts/tS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />42   15027 Wed Mar 22 09:33:31 2006&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /dev/pts/tY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />46   20194 Wed Mar 22 10:13:10 2006&#160;&#160; JOSGAR&#160;&#160;&#160;&#160;&#160; /dev/pts/thb&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />92&#160;&#160;  5588 Wed Mar 22 09:06:43 2006&#160;&#160; khabut&#160;&#160;&#160;&#160;&#160; EDDIE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br />93&#160;&#160;  4676 Tue Mar 21 11:13:11 2006&#160;&#160; sysadmin&#160;&#160;&#160; EDDIE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; no<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1 Disconnect a User<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 2 Unconditional Shutdown<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 3 Emergency Shutdown (Kill All)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; x Exit<br /><br />&#160;&#160; Enter choice&gt;</pre>
        <p>You can now select option 1 to disconnect a user and then type in the user number.&#160; This will disconnect the report agent from the database and the report generation should be terminated.&#160; The report output may or may not be generated (it is most likely that it will not) depending on the type of report and where it has got to in the generation process.</p>
        <p>If you have tried all the above suggestions and the report continues to run then you should contact the communication <MadCap:variable name="Variables.centre" /> for advice.</p>
    </body>
</html>